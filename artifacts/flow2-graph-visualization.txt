================================================================================
                    Flow2 KYC Graph - Visual Representation
                          (Exported to n8n format)
================================================================================

Graph ID: flow2_kyc_v1
Version: 1.0.0
Extraction Mode: RUNTIME (from POST /api/orchestrate)

================================================================================
                              GRAPH STRUCTURE
================================================================================

[START] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                                        â”‚
  â”‚ Synthetic entry point (n8n-nodes-base.start)                          â”‚
  â”‚                                                                        â”‚
  v                                                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ [1] Topic Assembler                                                  â”‚  â”‚
â”‚     Type: skill (n8n-nodes-base.noOp)                                â”‚  â”‚
â”‚     Extracts and organizes KYC topics from documents                 â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                                        â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [on error] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚                                                                 â”‚      â”‚
  v                                                                 â”‚      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ [2] Risk Triage                                                      â”‚  â”‚
â”‚     Type: skill (n8n-nodes-base.noOp)                                â”‚  â”‚
â”‚     Evaluates risk score and determines routing path                 â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                                        â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [on error] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚                                                                 â”‚      â”‚
  v                                                                 â”‚      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ [3] Parallel Checks                                                  â”‚  â”‚
â”‚     Type: system (n8n-nodes-base.noOp)                               â”‚  â”‚
â”‚     Runs conflict sweep, gap collector, policy flags in parallel     â”‚  â”‚
â”‚     Config: parallelism = unlimited                                  â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                                        â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [on error] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚                                                                 â”‚      â”‚
  v                                                                 â”‚      â”‚
â”Œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”  â”‚
â•‘ [4] Human Review  ğŸš¦ HITL CHECKPOINT                                 â•‘  â”‚
â•‘     Type: gate (n8n-nodes-base.wait)                                 â•‘  â”‚
â•‘     Pauses execution for human approval/rejection (Phase 2 HITL)     â•‘  â”‚
â•‘     Config: pause_if_no_decision = true                              â•‘  â”‚
â””â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”˜  â”‚
  â”‚                                                                        â”‚
  â”œâ”€â”€â”€ [if approved + reflection enabled] â”€â”€â”€â”                           â”‚
  â”‚                                           â”‚                           â”‚
  â”‚   [if approved + no reflection]           â”‚                           â”‚
  â”‚                 â”‚                         â”‚                           â”‚
  â”‚                 v                         v                           â”‚
  â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚           â”‚ Finalize  â”‚        â”‚ [5] Reflect And Replan          â”‚   â”‚
  â”‚           â”‚           â”‚        â”‚     Type: system (noOp)         â”‚   â”‚
  â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚     Self-reflection: analyzes   â”‚   â”‚
  â”‚                 ^              â”‚     trace and decides next      â”‚   â”‚
  â”‚                 â”‚              â”‚     Config: maxReplans = 1      â”‚   â”‚
  â”‚                 â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                 â”‚                            â”‚                        â”‚
  â”‚                 â”‚                            v                        â”‚
  â”‚                 â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚                 â”‚              â”‚ [6] Routing Decision            â”‚   â”‚
  â”‚                 â”‚              â”‚     Type: router (noOp)         â”‚   â”‚
  â”‚                 â”‚              â”‚     Routes based on reflection  â”‚   â”‚
  â”‚                 â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                 â”‚                â”‚         â”‚           â”‚              â”‚
  â”‚                 â”‚                â”‚         â”‚           â”‚              â”‚
  â”‚                 â”‚   [rerun]â”€â”€â”€â”€â”€â”˜         â”‚           â””â”€â”€â”€ [continue]â”‚
  â”‚                 â”‚         â”‚               â”‚                      â”‚    â”‚
  â”‚                 â”‚         â”‚    [ask human]â”‚                      â”‚    â”‚
  â”‚                 â”‚         â”‚               â”‚                      â”‚    â”‚
  â”‚                 â”‚         v               v                      â”‚    â”‚
  â”‚                 â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”â”‚    â”‚
  â”‚                 â”‚  â”‚ Parallel   â”‚  â•‘ [7] Human Gate ğŸš¦         â•‘â”‚    â”‚
  â”‚                 â”‚  â”‚ Checks     â”‚  â•‘     Type: gate (wait)     â•‘â”‚    â”‚
  â”‚                 â”‚  â”‚ (loop back)â”‚  â•‘     Pauses for human      â•‘â”‚    â”‚
  â”‚                 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘     decision (EDD scope)  â•‘â”‚    â”‚
  â”‚                 â”‚                  â•‘     Config: maxGates = 1  â•‘â”‚    â”‚
  â”‚                 â”‚                  â””â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”˜â”‚    â”‚
  â”‚                 â”‚                            â”‚                   â”‚    â”‚
  â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                     â”‚                                 â”‚
  â”‚                                     v                                 â”‚
  â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚                           â”‚ [8] Finalize                         â”‚    â”‚
  â”‚                           â”‚     Type: system (noOp)              â”‚    â”‚
  â”‚                           â”‚     Aggregates results and prepares  â”‚    â”‚
  â”‚                           â”‚     final response                   â”‚    â”‚
  â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [all error paths] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        v
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚ [9] Error Handler                    â”‚
                           â”‚     Type: system (noOp)              â”‚
                           â”‚     Handles execution errors and     â”‚
                           â”‚     returns degraded response        â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
                              NODE TYPE SUMMARY
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ n8n Node Type              â”‚ Count  â”‚ Flow2 Nodes                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ n8n-nodes-base.start       â”‚   1    â”‚ Start (synthetic)                    â”‚
â”‚ n8n-nodes-base.noOp        â”‚   7    â”‚ topic_assembler, risk_triage,        â”‚
â”‚                            â”‚        â”‚ parallel_checks, reflect_and_replan, â”‚
â”‚                            â”‚        â”‚ routing_decision, finalize,          â”‚
â”‚                            â”‚        â”‚ error_handler                        â”‚
â”‚ n8n-nodes-base.wait        â”‚   2    â”‚ human_review ğŸš¦, human_gate ğŸš¦       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TOTAL                      â”‚  10    â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
                           HUMAN CHECKPOINTS (HITL)
================================================================================

ğŸš¦ Human Review (node 4)
   - Pauses execution for human approval/rejection
   - Phase 2 HITL implementation
   - Config: pause_if_no_decision = true
   - Triggers: After parallel_checks detects high-risk issues

ğŸš¦ Human Gate (node 7)
   - Pauses execution for human decision
   - Enhanced Due Diligence (EDD) scope expansion
   - Config: maxGates = 1
   - Triggers: When reflection decides to "ask_human_for_scope"

================================================================================
                              CONNECTION SUMMARY
================================================================================

Total Connections: 8 nodes with outgoing edges

From: Start               â†’ To: Topic Assembler
From: Topic Assembler     â†’ To: Risk Triage, Error Handler
From: Risk Triage         â†’ To: Parallel Checks, Error Handler
From: Parallel Checks     â†’ To: Human Review, Error Handler
From: Human Review        â†’ To: Reflect And Replan, Finalize
From: Reflect And Replan  â†’ To: Routing Decision
From: Routing Decision    â†’ To: Parallel Checks, Human Gate, Finalize
From: Human Gate          â†’ To: Finalize

================================================================================
                              EXECUTION PATHS
================================================================================

1. HAPPY PATH (No Reflection):
   Start â†’ Topic Assembler â†’ Risk Triage â†’ Parallel Checks â†’ 
   Human Review â†’ Finalize

2. REFLECTION PATH:
   Start â†’ Topic Assembler â†’ Risk Triage â†’ Parallel Checks â†’ 
   Human Review â†’ Reflect And Replan â†’ Routing Decision â†’ Finalize

3. RERUN PATH (Reflection decides to retry):
   ... â†’ Routing Decision â†’ Parallel Checks (loop back) â†’ 
   Human Review â†’ ...

4. HUMAN GATE PATH (Reflection needs human input):
   ... â†’ Routing Decision â†’ Human Gate â†’ Finalize

5. ERROR PATH:
   Any node â†’ Error Handler (on exception)

================================================================================

Generated: 2026-01-02
Exporter: tools/export-flow2-to-n8n.mjs
Output: artifacts/flow2.n8n.json
Commit: 46f74a2

